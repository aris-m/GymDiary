{% extends 'base.html' %}
{% block content %}

<style>
    .card .nav-link {
        color: black !important; 
    }

    .workouts-container {
        position: relative;
    }

    .add-workout {
        position: absolute;
        bottom: 10px; 
        right: 10px;
        margin-top: 10px;
    }

    .delete-icon {
        color: #dc3545; 
    }
</style>

<div class="card text">
    <div class="card-header">
      <ul class="nav nav-tabs card-header-tabs">
        <li class="nav-item">
          <a class="nav-link active" aria-current="true" href="#general_info" data-toggle="tab">General Information</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" id="workouts-tab" href="#workouts" data-toggle="tab">Workouts</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="#goals" data-toggle="tab">Goals</a>
        </li>
      </ul>
    </div>
    <div class="card-body">
        <div class="tab-content">
            <div class="tab-pane fade show active" id="general_info">
                <p class="card-text">
                    <strong>Date: </strong>{{ workout_session.date }}
                </p>
                <p class="card-text">
                    <strong>Duration: </strong>{{ workout_session.duration }} minutes
                </p>
                <p class="card-text">
                    <strong>Notes: </strong>{{ workout_session.notes }}
                </p>
            </div>
            <div class="tab-pane fade" id="workouts">
                <div class="workouts-container">
                    <a class="btn btn-outline-primary btn-sm" href="{% url 'add-workout' workout_session.id %}">
                        Add Workout
                    </a>
                    <hr>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Name</th>
                                <th>Type</th>
                                <th>Muscle Groups</th>
                                <th></th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for workout in workouts %}
                                <tr>
                                    <td>{{ forloop.counter }}</td>
                                    <td>{{ workout.name }}</td>
                                    <td>{{ workout.type }}</td>
                                    <td>{{ workout.muscle_groups }}</td>
                                    <td>
                                        <a href="{% url 'update-workout' workout_session.id workout.id %}" style="text-decoration: none;">
                                            <span class="fas fa-pencil-alt"></span>
                                        </a>
                                    </td>
                                    <td>
                                        <a href="{% url 'delete-workout' workout_session.id workout.id %}" style="text-decoration: none;">
                                            <span class="fas fa-times delete-icon"></span>
                                        </a>
                                    </td>
                                </tr>
                            {% empty %}
                                <tr>
                                    <td colspan="4">No workouts recorded for this session.</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="tab-pane fade" id="goals">
                <div class="goals-container">
                    <a class="btn btn-outline-primary btn-sm" href="{% url 'add-goal' workout_session.id %}">
                        Add Goals
                    </a>
                    <hr>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>#</th>
                                <th>Description</th>
                                <th>Accomplished</th>
                                <th></th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for goal in goals %}
                                <tr>
                                    <td>{{ forloop.counter }}</td>
                                    <td>{{ goal.description }}</td>
                                    <td>{{ goal.accomplished }}</td>
                                    <td>
                                        <a href="{% url 'delete-goal' workout_session.id goal.id %}" style="text-decoration: none;">
                                            <span class="fas fa-times delete-icon"></span>
                                        </a>
                                    </td>
                                </tr>
                            {% empty %}
                                <tr>
                                    <td colspan="3">No goals recorded for this session.</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>


<br/><br/>
<a href="{% url 'tracker' %}" class="btn btn-secondary">Back</a>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.bundle.min.js"></script>
<script>
    $(document).ready(function(){
        $('.nav-link').on('click', function(){
            $('.nav-link').removeClass('active');
            $(this).addClass('active');
            var target = $(this).attr('href');
            $('.tab-pane').removeClass('show active');
            $(target).addClass('show active');
        });
    });
</script>

{% endblock %}
